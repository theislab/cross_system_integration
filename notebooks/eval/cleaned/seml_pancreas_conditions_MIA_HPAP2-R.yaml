seml:
  executable: /home/moinfar/projects/cross_system_integration/notebooks/eval/cleaned/run_integration_seml.py
  name: csi_eval
  output_dir: /home/moinfar/io/csi/eval/pancreas_conditions_MIA_HPAP2/logs # CHANGE! OUT!
  project_root_dir:  /home/moinfar/projects/cross_system_integration/notebooks/eval/cleaned
  conda_environment: csi
  
slurm:
  max_simultaneous_jobs: 20
#  sbatch_options_template: CPU
  sbatch_options:
    mem: 200G         
    cpus-per-task: 16  
    time: 0-30:00     
    nice: 10000

fixed:
  path_save: /home/moinfar/io/csi/eval/pancreas_conditions_MIA_HPAP2/ # CHANGE! OUT!
  max_epochs: 20
  epochs_detail_plot: 5
  # Model params
  system_decoders: 0
  # Task
  eval_type: integration
  # Data
  path_adata: /om2/user/khrovati/data/cross_system_integration/pancreas_conditions_MIA_HPAP2/combined_orthologuesHVG.h5ad
  fn_moransi: /om2/user/khrovati/data/cross_system_integration/pancreas_conditions_MIA_HPAP2/combined_orthologuesHVG_moransiGenes.pkl
  fn_expr: /om2/user/khrovati/data/cross_system_integration/pancreas_conditions_MIA_HPAP2/combined_orthologuesHVG.h5ad
  group_key: cell_type_eval
  batch_key: batch
  system_key: system
  system_values: mouse-human
  n_cells_eval: 100000 
  conda_env: csi
  pca_key: X_pca_system
  cluster_key: leiden_system
  saturn_emb: /om2/user/khrovati/data/saturn/protein_embeddings_export/ESM2/
  saturn_code: /om2/user/khrovati/miniconda/envs/saturn/lib/python3.9/site-packages/SATURN_fix/
       
  
grid:
  seed_num:
    type: choice
    options:
      - 1
      - 2
      - 3 
     
seurat_cca:
    fixed:
      model: seurat
      params_opt: seurat_cca_k_anchor
      conda_env: NA
      reduction: cca
      k_weight: 50  # We have to enforce this since one batch is small
      language: R
    grid:
      k_anchor:
        type: choice
        options:
          - 2
          - 5
          - 10
          - 20
          - 50

seurat_rpca:
    fixed:
      model: seurat
      params_opt: seurat_rpca_k_anchor
      conda_env: NA
      reduction: rpca
      k_weight: 35  # We have to enforce this since one batch is small
      language: R
    grid:
      k_anchor:
        type: choice
        options:
          - 2
          - 5
          - 10
          - 20
          - 50

harmony:
    fixed:
      model: harmony
      params_opt: harmony_theta
      conda_env: NA
      reduction: harmony
      language: R
    grid:
      harmony_theta:
        type: choice
        options:
          - 0.1
          - 1.0
          - 5.0
          - 10.0
          - 100.0
